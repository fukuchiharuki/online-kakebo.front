(this["webpackJsonponline-kakebo.front"]=this["webpackJsonponline-kakebo.front"]||[]).push([[0],{26:function(t,n,e){},29:function(t,n,e){},35:function(t,n,e){"use strict";e.r(n);var r,c=e(1),i=e.n(c),u=e(17),a=e.n(u),s=(e(26),e(5)),o=e(14),l=e(7),h=e(21),f=e(3),d=e(4);!function(t){t["\u98df\u8cbb"]="\u98df\u8cbb",t["\u98df\u8cbb_\u500b\u5225"]="\u98df\u8cbb(\u500b\u5225)",t["\u65e5\u7528\u54c1\u8cbb"]="\u65e5\u7528\u54c1\u8cbb",t["\u5a2f\u697d\u8cbb"]="\u5a2f\u697d\u8cbb",t["\u533b\u7642\u8cbb"]="\u533b\u7642\u8cbb",t["\u6c34\u9053\u5149\u71b1\u8cbb"]="\u6c34\u9053\u5149\u71b1\u8cbb",t["\u901a\u4fe1\u8cbb"]="\u901a\u4fe1\u8cbb",t["\u4f4f\u5c45\u8cbb"]="\u4f4f\u5c45\u8cbb",t["\u7279\u5225\u8cbb"]="\u7279\u5225\u8cbb",t["\u5143\u5165\u91d1"]="\u5143\u5165\u91d1"}(r||(r={}));function j(t){switch(t){case r.\u98df\u8cbb:case r.\u98df\u8cbb_\u500b\u5225:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u98df\u8cbb}};case r.\u65e5\u7528\u54c1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u65e5\u7528\u54c1\u8cbb}};case r.\u5a2f\u697d\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u5a2f\u697d\u8cbb}};case r.\u533b\u7642\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u533b\u7642\u8cbb}};case r.\u6c34\u9053\u5149\u71b1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u6c34\u9053\u5149\u71b1\u8cbb}};case r.\u901a\u4fe1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u901a\u4fe1\u8cbb}};case r.\u4f4f\u5c45\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u4f4f\u5c45\u8cbb}};case r.\u7279\u5225\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!0},category:function(){return r.\u7279\u5225\u8cbb}};case r.\u5143\u5165\u91d1:return{"is\u53ce\u5165":function(){return!0},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u5143\u5165\u91d1}}}}var b,v=function(){function t(n){Object(f.a)(this,t),this.accountItem=void 0,this.amount=void 0,Object.assign(this,n)}return Object(d.a)(t,[{key:"category",value:function(){return j(this.accountItem).category()}},{key:"categoryIs",value:function(t){return this.category()===t}},{key:"is",value:function(t){return this.accountItem===t}},{key:"is\u53ce\u5165",value:function(){return j(this.accountItem).is\u53ce\u5165()}},{key:"is\u7279\u5225\u8cbb",value:function(){return j(this.accountItem).is\u7279\u5225\u8cbb()}}]),t}(),O=function(){function t(n){Object(f.a)(this,t),this.value=void 0,this.value=n}return Object(d.a)(t,[{key:"\u53ce\u5165",value:function(){return this.value.filter\u53ce\u5165().totalAmount()}},{key:"\u652f\u51fa",value:function(){return this.value.filter\u652f\u51fa().totalAmount()}},{key:"\u7279\u5225\u8cbb",value:function(){return this.value.filter\u7279\u5225\u8cbb().totalAmount()}},{key:"\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa",value:function(){return this.\u652f\u51fa()-this.\u7279\u5225\u8cbb()}},{key:"\u7279\u5225\u8cbb\u3092\u542b\u3081\u306a\u3044\u5dee\u5f15",value:function(){return this.\u53ce\u5165()-this.\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa()}},{key:"\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15",value:function(){return this.\u53ce\u5165()-this.\u652f\u51fa()}}],[{key:"of",value:function(n){return new t(n)}}]),t}(),y=function(){function t(n){var e;Object(f.a)(this,t),this.month=void 0,this.data=void 0,Object.assign(this,Object(s.a)(Object(s.a)({},n),{},{data:null===(e=n.data)||void 0===e?void 0:e.map((function(t){return new v(t)}))}))}return Object(d.a)(t,[{key:"asSummary",value:function(){return O.of(this)}},{key:"totalAmount",value:function(){return this.data.map((function(t){return t.amount})).reduce((function(t,n){return t+n}),0)}},{key:"categories",value:function(){return this.data.map((function(t){return t.category()})).reduce((function(t,n){return t.includes(n)?t:t.concat(n)}),[])}},{key:"filterByCategory",value:function(n){return new t({month:this.month,data:this.data.filter((function(t){return t.categoryIs(n)}))})}},{key:"filterByAccountItemType",value:function(n){return new t({month:this.month,data:this.data.filter((function(t){return t.is(n)}))})}},{key:"filter\u53ce\u5165",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return t.is\u53ce\u5165()}))})}},{key:"filter\u652f\u51fa",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return!t.is\u53ce\u5165()}))})}},{key:"filter\u7279\u5225\u8cbb",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return t.is\u7279\u5225\u8cbb()}))})}}]),t}(),m=function(){function t(n){var e;Object(f.a)(this,t),this.values=void 0,Object.assign(this,{values:null===(e=n.values)||void 0===e?void 0:e.map((function(t){return new y(t)}))})}return Object(d.a)(t,[{key:"isEmpty",value:function(){return 0===this.values.length}},{key:"currentMonth",value:function(){return this.values.slice(-1)[0]}}],[{key:"empty",value:function(){return new t({values:[]})}}]),t}(),g={isLoading:!1,data:m.empty()};function x(t,n){switch(n.type){case b.FETCH:return Object(s.a)(Object(s.a)({},t),{},{isLoading:!0});case b.FETCHED:var e=new m({values:n.payload.json});return Object(s.a)(Object(s.a)({},t),{},{data:e,isLoading:!1})}}!function(t){t[t.FETCH=0]="FETCH",t[t.FETCHED=1]="FETCHED"}(b||(b={}));var p=e(11),k=e.n(p),w=e(18);var F=function(t){var n=t.aggregation(),e=Object(c.useReducer)(x,g),r=Object(h.a)(e,2),i=r[0],u=r[1];return function(t,n){var e=n.preProcess,r=n.postProcess,i=n.errorHandler;Object(c.useEffect)((function(){Object(w.a)(k.a.mark((function n(){var c,u;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&e(),n.next=3,fetch(t);case 3:if(!(c=n.sent).ok){n.next=11;break}return n.next=7,c.json();case 7:u=n.sent,r&&r(u),n.next=12;break;case 11:i&&i();case 12:case"end":return n.stop()}}),n)})))()}),[t,e,r,i])}(n,{preProcess:Object(c.useCallback)((function(){return u({type:b.FETCH})}),[]),postProcess:Object(c.useCallback)((function(t){return u(function(t){return{type:b.FETCHED,payload:{json:t}}}(t))}),[])}),i},C=e(0);var E=function(t){return Object(C.jsx)(c.Fragment,{children:t.children.toLocaleString()})};var T=function(t){if(!t.if)return null;var n="function"===typeof t.children?t.children():t.children;return Object(C.jsx)(c.Fragment,{children:n})};var I=function(t){var n=t.children;return Object(C.jsxs)("dl",{className:"monthly-summary",children:[Object(C.jsx)("dt",{children:"\u53ce\u5165"}),Object(C.jsx)("dd",{children:Object(C.jsx)(E,{children:n.\u53ce\u5165()})}),Object(C.jsx)("dt",{children:"\u652f\u51fa"}),Object(C.jsx)("dd",{children:Object(C.jsx)(E,{children:n.\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa()})}),Object(C.jsx)(T,{if:n.\u7279\u5225\u8cbb(),children:Object(C.jsxs)("dd",{children:["(+ \u7279\u5225\u8cbb: ",Object(C.jsx)(E,{children:n.\u7279\u5225\u8cbb()}),")"]})}),Object(C.jsx)("dt",{children:"\u5dee\u5f15"}),Object(C.jsx)("dd",{children:Object(C.jsx)(E,{children:n.\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15()})}),Object(C.jsx)(T,{if:n.\u7279\u5225\u8cbb(),children:Object(C.jsxs)("dd",{children:["(\u7279\u5225\u8cbb\u8fbc: ",Object(C.jsx)(E,{children:n.\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15()}),")"]})})]})},A=function(){function t(n){Object(f.a)(this,t),this.script=void 0,this.data=void 0,Object.assign(this,n)}return Object(d.a)(t,[{key:"aggregation",value:function(){return this.url("aggregation")}},{key:"url",value:function(t){return"https://script.google.com/macros/s/".concat(this.script,"/exec?resource=").concat(t,"&id=").concat(this.data)}}]),t}();var H=function(t){return Object(C.jsx)(c.Fragment,{children:t.in.map(t.children).map((function(t,n){return Object(C.jsx)(c.Fragment,{children:t},n)}))})};var L=function(t){var n=t.children;return Object(C.jsx)("dl",{className:"monthly-details",children:Object(C.jsx)(H,{in:n.categories(),children:function(t){var e=n.filterByCategory(t).totalAmount(),r=n.filterByAccountItemType(t).totalAmount(),i=e!==r;return Object(C.jsxs)(c.Fragment,{children:[Object(C.jsxs)("dt",{children:[t,Object(C.jsx)(T,{if:i,children:"*"})]}),Object(C.jsx)("dd",{children:Object(C.jsx)(E,{children:e})}),Object(C.jsx)(T,{if:i,children:Object(C.jsxs)("dd",{children:["(*\u5185 \u7d14\u7c8b\u306a",t,": ",Object(C.jsx)(E,{children:r}),")"]})})]})}})})},B=function(){function t(){Object(f.a)(this,t),this.value=void 0,this.value=new Date}return Object(d.a)(t,[{key:"restOfCurrentMonth",value:function(){var t=new Date(this.value.getFullYear(),this.value.getMonth()+1,0);return Math.ceil((t.getTime()-this.value.getTime())/864e5)}}]),t}();e(29);function D(){return Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"loader",children:"Loading..."})})}var M=function(t){if(t.if)return Object(C.jsx)(D,{});var n="function"===typeof t.children?t.children():t.children;return Object(C.jsx)(c.Fragment,{children:n})};var P=function(t){var n=function(t){var n=new URLSearchParams(t),e=n.get("script"),r=n.get("data");return new A({script:e,data:r})}(t.location.search),e=F(n),r=e.isLoading,i=e.data,u=i.currentMonth();return Object(C.jsxs)(c.Fragment,{children:[Object(C.jsx)("header",{children:Object(C.jsx)("h1",{children:"Online KAKEBO"})}),Object(C.jsx)("hr",{}),Object(C.jsx)(M,{if:r||i.isEmpty(),children:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("h2",{children:"\u4eca\u6708"}),Object(C.jsxs)("p",{children:["(\u6b8b\u308a ",(new B).restOfCurrentMonth()," \u65e5)"]}),Object(C.jsx)(I,{children:u.asSummary()}),Object(C.jsx)("h3",{children:"\u5185\u8a33"}),Object(C.jsx)(L,{children:u})]})}})]})},S=Object(l.a)();function N(t){return Object(C.jsx)(P,Object(s.a)({},t))}var J=function(){return Object(C.jsx)(o.b,{history:S,children:Object(C.jsx)(o.a,{path:"/",render:N})})},K=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,36)).then((function(n){var e=n.getCLS,r=n.getFID,c=n.getFCP,i=n.getLCP,u=n.getTTFB;e(t),r(t),c(t),i(t),u(t)}))};a.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(J,{})}),document.getElementById("root")),K()}},[[35,1,2]]]);
//# sourceMappingURL=main.de77f054.chunk.js.map