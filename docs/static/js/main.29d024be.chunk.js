(this["webpackJsonponline-kakebo.front"]=this["webpackJsonponline-kakebo.front"]||[]).push([[0],{26:function(t,n,e){},34:function(t,n,e){"use strict";e.r(n);var r,i=e(1),c=e.n(i),u=e(17),a=e.n(u),s=(e(26),e(8)),o=e(14),h=e(6),l=e(11),f=e.n(l),j=e(18),d=e(21),v=e(3),b=e(4);!function(t){t["\u98df\u8cbb"]="\u98df\u8cbb",t["\u98df\u8cbb_\u500b\u5225"]="\u98df\u8cbb(\u500b\u5225)",t["\u65e5\u7528\u54c1\u8cbb"]="\u65e5\u7528\u54c1\u8cbb",t["\u5a2f\u697d\u8cbb"]="\u5a2f\u697d\u8cbb",t["\u533b\u7642\u8cbb"]="\u533b\u7642\u8cbb",t["\u6c34\u9053\u5149\u71b1\u8cbb"]="\u6c34\u9053\u5149\u71b1\u8cbb",t["\u901a\u4fe1\u8cbb"]="\u901a\u4fe1\u8cbb",t["\u4f4f\u5c45\u8cbb"]="\u4f4f\u5c45\u8cbb",t["\u7279\u5225\u8cbb"]="\u7279\u5225\u8cbb",t["\u5143\u5165\u91d1"]="\u5143\u5165\u91d1"}(r||(r={}));function O(t){switch(t){case r.\u98df\u8cbb:case r.\u98df\u8cbb_\u500b\u5225:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u98df\u8cbb}};case r.\u65e5\u7528\u54c1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u65e5\u7528\u54c1\u8cbb}};case r.\u5a2f\u697d\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u5a2f\u697d\u8cbb}};case r.\u533b\u7642\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u533b\u7642\u8cbb}};case r.\u6c34\u9053\u5149\u71b1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u6c34\u9053\u5149\u71b1\u8cbb}};case r.\u901a\u4fe1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u901a\u4fe1\u8cbb}};case r.\u4f4f\u5c45\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u4f4f\u5c45\u8cbb}};case r.\u7279\u5225\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!0},category:function(){return r.\u7279\u5225\u8cbb}};case r.\u5143\u5165\u91d1:return{"is\u53ce\u5165":function(){return!0},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u5143\u5165\u91d1}}}}var m=function(){function t(n){Object(v.a)(this,t),this.accountItem=void 0,this.amount=void 0,Object.assign(this,n)}return Object(b.a)(t,[{key:"category",value:function(){return O(this.accountItem).category()}},{key:"categoryIs",value:function(t){return this.category()===t}},{key:"is",value:function(t){return this.accountItem===t}},{key:"is\u53ce\u5165",value:function(){return O(this.accountItem).is\u53ce\u5165()}},{key:"is\u7279\u5225\u8cbb",value:function(){return O(this.accountItem).is\u7279\u5225\u8cbb()}}]),t}(),y=function(){function t(n){Object(v.a)(this,t),this.value=void 0,this.value=n}return Object(b.a)(t,[{key:"\u53ce\u5165",value:function(){return this.value.filter\u53ce\u5165().totalAmount()}},{key:"\u652f\u51fa",value:function(){return this.value.filter\u652f\u51fa().totalAmount()}},{key:"\u7279\u5225\u8cbb",value:function(){return this.value.filter\u7279\u5225\u8cbb().totalAmount()}},{key:"\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa",value:function(){return this.\u652f\u51fa()-this.\u7279\u5225\u8cbb()}},{key:"\u7279\u5225\u8cbb\u3092\u542b\u3081\u306a\u3044\u5dee\u5f15",value:function(){return this.\u53ce\u5165()-this.\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa()}},{key:"\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15",value:function(){return this.\u53ce\u5165()-this.\u652f\u51fa()}}],[{key:"of",value:function(n){return new t(n)}}]),t}(),g=function(){function t(n){var e;Object(v.a)(this,t),this.month=void 0,this.data=void 0,Object.assign(this,Object(s.a)(Object(s.a)({},n),{},{data:null===(e=n.data)||void 0===e?void 0:e.map((function(t){return new m(t)}))}))}return Object(b.a)(t,[{key:"asSummary",value:function(){return y.of(this)}},{key:"totalAmount",value:function(){return this.data.map((function(t){return t.amount})).reduce((function(t,n){return t+n}),0)}},{key:"categories",value:function(){return this.data.map((function(t){return t.category()})).reduce((function(t,n){return t.includes(n)?t:t.concat(n)}),[])}},{key:"filterByCategory",value:function(n){return new t({month:this.month,data:this.data.filter((function(t){return t.categoryIs(n)}))})}},{key:"filterByAccountItemType",value:function(n){return new t({month:this.month,data:this.data.filter((function(t){return t.is(n)}))})}},{key:"filter\u53ce\u5165",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return t.is\u53ce\u5165()}))})}},{key:"filter\u652f\u51fa",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return!t.is\u53ce\u5165()}))})}},{key:"filter\u7279\u5225\u8cbb",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return t.is\u7279\u5225\u8cbb()}))})}}]),t}(),x=function(){function t(n){var e;Object(v.a)(this,t),this.values=void 0,Object.assign(this,{values:null===(e=n.values)||void 0===e?void 0:e.map((function(t){return new g(t)}))})}return Object(b.a)(t,[{key:"isEmpty",value:function(){return 0===this.values.length}},{key:"currentMonth",value:function(){return this.values.slice(-1)[0]}}]),t}(),k=new x({values:[]});var p=function(t){var n=t.aggregation(),e=Object(i.useState)(k),r=Object(d.a)(e,2),c=r[0],u=r[1];return Object(i.useEffect)((function(){Object(j.a)(f.a.mark((function t(){var e,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n);case 2:if(!(e=t.sent).ok){t.next=13;break}return t.t0=x,t.next=7,e.json();case 7:t.t1=t.sent,t.t2={values:t.t1},r=new t.t0(t.t2),u(r),t.next=14;break;case 13:u(k);case 14:case"end":return t.stop()}}),t)})))()}),[n]),c},w=e(0);var F=function(t){return Object(w.jsx)(i.Fragment,{children:t.children.toLocaleString()})};var I=function(t){return t.if?Object(w.jsx)(i.Fragment,{children:t.children}):null};var A=function(t){var n=t.children;return Object(w.jsxs)("dl",{className:"monthly-summary",children:[Object(w.jsx)("dt",{children:"\u53ce\u5165"}),Object(w.jsx)("dd",{children:Object(w.jsx)(F,{children:n.\u53ce\u5165()})}),Object(w.jsx)("dt",{children:"\u652f\u51fa"}),Object(w.jsx)("dd",{children:Object(w.jsx)(F,{children:n.\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa()})}),Object(w.jsx)(I,{if:n.\u7279\u5225\u8cbb(),children:Object(w.jsxs)("dd",{children:["(+ \u7279\u5225\u8cbb: ",Object(w.jsx)(F,{children:n.\u7279\u5225\u8cbb()}),")"]})}),Object(w.jsx)("dt",{children:"\u5dee\u5f15"}),Object(w.jsx)("dd",{children:Object(w.jsx)(F,{children:n.\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15()})}),Object(w.jsx)(I,{if:n.\u7279\u5225\u8cbb(),children:Object(w.jsxs)("dd",{children:["(\u7279\u5225\u8cbb\u8fbc: ",Object(w.jsx)(F,{children:n.\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15()}),")"]})})]})},B=function(){function t(n){Object(v.a)(this,t),this.script=void 0,this.data=void 0,Object.assign(this,n)}return Object(b.a)(t,[{key:"aggregation",value:function(){return this.url("aggregation")}},{key:"url",value:function(t){return"https://script.google.com/macros/s/".concat(this.script,"/exec?resource=").concat(t,"&id=").concat(this.data)}}]),t}();var C=function(t){return Object(w.jsx)(i.Fragment,{children:t.in.map(t.children).map((function(t,n){return Object(w.jsx)(i.Fragment,{children:t},n)}))})};var M=function(t){var n=t.children;return Object(w.jsx)("dl",{className:"monthly-details",children:Object(w.jsx)(C,{in:n.categories(),children:function(t){var e=n.filterByCategory(t).totalAmount(),r=n.filterByAccountItemType(t).totalAmount(),c=e!==r;return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsxs)("dt",{children:[t,Object(w.jsx)(I,{if:c,children:"*"})]}),Object(w.jsx)("dd",{children:Object(w.jsx)(F,{children:e})}),Object(w.jsx)(I,{if:c,children:Object(w.jsxs)("dd",{children:["(*\u5185 \u7d14\u7c8b\u306a",t,": ",Object(w.jsx)(F,{children:r}),")"]})})]})}})})},S=function(){function t(){Object(v.a)(this,t),this.value=void 0,this.value=new Date}return Object(b.a)(t,[{key:"restOfCurrentMonth",value:function(){var t=new Date(this.value.getFullYear(),this.value.getMonth()+1,0);return Math.ceil((t.getTime()-this.value.getTime())/864e5)}}]),t}();var T=function(t){var n=function(t){var n=new URLSearchParams(t),e=n.get("script"),r=n.get("data");return new B({script:e,data:r})}(t.location.search),e=p(n);if(e.isEmpty())return Object(w.jsx)(i.Fragment,{children:"Now loading..."});var r=e.currentMonth();return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)("header",{children:Object(w.jsx)("h1",{children:"Online KAKEBO"})}),Object(w.jsx)("hr",{}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"\u4eca\u6708"}),Object(w.jsxs)("p",{children:["(\u6b8b\u308a ",(new S).restOfCurrentMonth()," \u65e5)"]}),Object(w.jsx)(A,{children:r.asSummary()}),Object(w.jsx)("h3",{children:"\u5185\u8a33"}),Object(w.jsx)(M,{children:r})]})]})},E=Object(h.a)();function L(t){return Object(w.jsx)(T,Object(s.a)({},t))}var D=function(){return Object(w.jsx)(o.b,{history:E,children:Object(w.jsx)(o.a,{path:"/",render:L})})},N=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,35)).then((function(n){var e=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,u=n.getTTFB;e(t),r(t),i(t),c(t),u(t)}))};a.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(D,{})}),document.getElementById("root")),N()}},[[34,1,2]]]);
//# sourceMappingURL=main.29d024be.chunk.js.map