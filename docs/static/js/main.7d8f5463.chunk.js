(this["webpackJsonponline-kakebo.front"]=this["webpackJsonponline-kakebo.front"]||[]).push([[0],{26:function(t,e,n){},28:function(t,e,n){},30:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var r,c=n(1),i=n.n(c),u=n(17),a=n.n(u),o=(n(26),n(4)),s=n(7),l=n(2),h=n(3),f=function(){function t(e){Object(l.a)(this,t),this.script=void 0,this.data=void 0,Object.assign(this,e)}return Object(h.a)(t,[{key:"aggregation",value:function(){return this.url("aggregation")}},{key:"url",value:function(t){return"https://script.google.com/macros/s/".concat(this.script,"/exec?resource=").concat(t,"&id=").concat(this.data)}}]),t}(),j=function(){function t(e){Object(l.a)(this,t),this.search=void 0,this.search=e}return Object(h.a)(t,[{key:"dataSource",value:function(){var t=new URLSearchParams(this.search),e=t.get("script"),n=t.get("data");return new f({script:e,data:n})}}]),t}(),d=n(21),b=n(11),v=n.n(b),O=n(18);!function(t){t["\u98df\u8cbb"]="\u98df\u8cbb",t["\u98df\u8cbb_\u500b\u5225"]="\u98df\u8cbb(\u500b\u5225)",t["\u65e5\u7528\u54c1\u8cbb"]="\u65e5\u7528\u54c1\u8cbb",t["\u5a2f\u697d\u8cbb"]="\u5a2f\u697d\u8cbb",t["\u533b\u7642\u8cbb"]="\u533b\u7642\u8cbb",t["\u6c34\u9053\u5149\u71b1\u8cbb"]="\u6c34\u9053\u5149\u71b1\u8cbb",t["\u901a\u4fe1\u8cbb"]="\u901a\u4fe1\u8cbb",t["\u4f4f\u5c45\u8cbb"]="\u4f4f\u5c45\u8cbb",t["\u7279\u5225\u8cbb"]="\u7279\u5225\u8cbb",t["\u5143\u5165\u91d1"]="\u5143\u5165\u91d1"}(r||(r={}));function y(t){switch(t){case r.\u98df\u8cbb:case r.\u98df\u8cbb_\u500b\u5225:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u98df\u8cbb}};case r.\u65e5\u7528\u54c1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u65e5\u7528\u54c1\u8cbb}};case r.\u5a2f\u697d\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u5a2f\u697d\u8cbb}};case r.\u533b\u7642\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u533b\u7642\u8cbb}};case r.\u6c34\u9053\u5149\u71b1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u6c34\u9053\u5149\u71b1\u8cbb}};case r.\u901a\u4fe1\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u901a\u4fe1\u8cbb}};case r.\u4f4f\u5c45\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u4f4f\u5c45\u8cbb}};case r.\u7279\u5225\u8cbb:return{"is\u53ce\u5165":function(){return!1},"is\u7279\u5225\u8cbb":function(){return!0},category:function(){return r.\u7279\u5225\u8cbb}};case r.\u5143\u5165\u91d1:return{"is\u53ce\u5165":function(){return!0},"is\u7279\u5225\u8cbb":function(){return!1},category:function(){return r.\u5143\u5165\u91d1}}}}var g,m=function(){function t(e){Object(l.a)(this,t),this.accountItem=void 0,this.amount=void 0,Object.assign(this,e)}return Object(h.a)(t,[{key:"category",value:function(){return y(this.accountItem).category()}},{key:"categoryIs",value:function(t){return this.category()===t}},{key:"is",value:function(t){return this.accountItem===t}},{key:"is\u53ce\u5165",value:function(){return y(this.accountItem).is\u53ce\u5165()}},{key:"is\u7279\u5225\u8cbb",value:function(){return y(this.accountItem).is\u7279\u5225\u8cbb()}}]),t}(),x=function(){function t(e){Object(l.a)(this,t),this.value=void 0,this.value=e}return Object(h.a)(t,[{key:"\u53ce\u5165",value:function(){return this.value.filter\u53ce\u5165().totalAmount()}},{key:"\u652f\u51fa",value:function(){return this.value.filter\u652f\u51fa().totalAmount()}},{key:"\u7279\u5225\u8cbb",value:function(){return this.value.filter\u7279\u5225\u8cbb().totalAmount()}},{key:"\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa",value:function(){return this.\u652f\u51fa()-this.\u7279\u5225\u8cbb()}},{key:"\u7279\u5225\u8cbb\u3092\u542b\u3081\u306a\u3044\u5dee\u5f15",value:function(){return this.\u53ce\u5165()-this.\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa()}},{key:"\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15",value:function(){return this.\u53ce\u5165()-this.\u652f\u51fa()}}],[{key:"of",value:function(e){return new t(e)}}]),t}(),k=function(){function t(e){var n;Object(l.a)(this,t),this.month=void 0,this.data=void 0,Object.assign(this,Object(o.a)(Object(o.a)({},e),{},{data:null===(n=e.data)||void 0===n?void 0:n.map((function(t){return new m(t)}))}))}return Object(h.a)(t,[{key:"asSummary",value:function(){return x.of(this)}},{key:"totalAmount",value:function(){return this.data.map((function(t){return t.amount})).reduce((function(t,e){return t+e}),0)}},{key:"categories",value:function(){return this.data.map((function(t){return t.category()})).reduce((function(t,e){return t.includes(e)?t:t.concat(e)}),[])}},{key:"filterByCategory",value:function(e){return new t({month:this.month,data:this.data.filter((function(t){return t.categoryIs(e)}))})}},{key:"filterByAccountItemType",value:function(e){return new t({month:this.month,data:this.data.filter((function(t){return t.is(e)}))})}},{key:"filter\u53ce\u5165",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return t.is\u53ce\u5165()}))})}},{key:"filter\u652f\u51fa",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return!t.is\u53ce\u5165()}))})}},{key:"filter\u7279\u5225\u8cbb",value:function(){return new t({month:this.month,data:this.data.filter((function(t){return t.is\u7279\u5225\u8cbb()}))})}}]),t}(),p=function(){function t(e){var n;Object(l.a)(this,t),this.values=void 0,Object.assign(this,{values:null===(n=e.values)||void 0===n?void 0:n.map((function(t){return new k(t)}))})}return Object(h.a)(t,[{key:"isEmpty",value:function(){return 0===this.values.length}},{key:"currentMonth",value:function(){return this.values.slice(-1)[0]}}],[{key:"empty",value:function(){return new t({values:[]})}}]),t}();!function(t){t[t.FETCH=0]="FETCH",t[t.FETCHED=1]="FETCHED"}(g||(g={}));var w={isLoading:!1,data:p.empty()};function F(t,e){switch(e.type){case g.FETCH:return Object(o.a)(Object(o.a)({},t),{},{isLoading:!0});case g.FETCHED:var n=new p({values:e.payload.json});return Object(o.a)(Object(o.a)({},t),{},{data:n,isLoading:!1})}}var C=function(t){var e=t.aggregation(),n=Object(c.useReducer)(F,w),r=Object(d.a)(n,2),i=r[0],u=r[1];return function(t,e){var n=e.preProcess,r=e.postProcess,i=e.errorHandler;Object(c.useEffect)((function(){Object(O.a)(v.a.mark((function e(){var c,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n(),console.log("get ".concat(t)),e.next=4,fetch(t);case 4:if(!(c=e.sent).ok){e.next=13;break}return e.next=8,c.json();case 8:u=e.sent,r&&r(u),console.log("ok"),e.next=15;break;case 13:i&&i(),console.log("error");case 15:case"end":return e.stop()}}),e)})))()}),[t,n,r,i])}(e,{preProcess:Object(c.useCallback)((function(){return u({type:g.FETCH})}),[u]),postProcess:Object(c.useCallback)((function(t){return u(function(t){return{type:g.FETCHED,payload:{json:t}}}(t))}),[u])}),i},E=(n(28),n(0));function T(t){return Object(E.jsx)("div",Object(o.a)({className:"fade-in"},t))}n(30);function A(){return Object(E.jsx)("div",{children:Object(E.jsx)("div",{className:"loader",children:"Loading..."})})}var I=function(t){if(t.if)return Object(E.jsx)(A,{});var e="function"===typeof t.children?t.children():t.children;return Object(E.jsx)(T,{children:e})};var H=function(t){return Object(E.jsx)(c.Fragment,{children:t.children.toLocaleString()})};var L=function(t){if(!t.if)return null;var e="function"===typeof t.children?t.children():t.children;return Object(E.jsx)(c.Fragment,{children:e})};var S=function(t){return Object(E.jsx)(c.Fragment,{children:t.in.map(t.children).map((function(t,e){return Object(E.jsx)(c.Fragment,{children:t},e)}))})};var B=function(t){var e=t.children;return Object(E.jsx)("dl",{className:"monthly-details",children:Object(E.jsx)(S,{in:e.categories(),children:function(t){var n=e.filterByCategory(t).totalAmount(),r=e.filterByAccountItemType(t).totalAmount(),i=n!==r;return Object(E.jsxs)(c.Fragment,{children:[Object(E.jsxs)("dt",{children:[t,Object(E.jsx)(L,{if:i,children:"*"})]}),Object(E.jsx)("dd",{children:Object(E.jsx)(H,{children:n})}),Object(E.jsx)(L,{if:i,children:Object(E.jsxs)("dd",{children:["(*\u5185 \u7d14\u7c8b\u306a",t,": ",Object(E.jsx)(H,{children:r}),")"]})})]})}})})};var D=function(t){var e=t.children;return Object(E.jsxs)("dl",{className:"monthly-summary",children:[Object(E.jsx)("dt",{children:"\u53ce\u5165"}),Object(E.jsx)("dd",{children:Object(E.jsx)(H,{children:e.\u53ce\u5165()})}),Object(E.jsx)("dt",{children:"\u652f\u51fa"}),Object(E.jsx)("dd",{children:Object(E.jsx)(H,{children:e.\u7279\u5225\u8cbb\u3092\u9664\u3044\u305f\u652f\u51fa()})}),Object(E.jsx)(L,{if:e.\u7279\u5225\u8cbb(),children:Object(E.jsxs)("dd",{children:["(+ \u7279\u5225\u8cbb: ",Object(E.jsx)(H,{children:e.\u7279\u5225\u8cbb()}),")"]})}),Object(E.jsx)("dt",{children:"\u5dee\u5f15"}),Object(E.jsx)("dd",{children:Object(E.jsx)(H,{children:e.\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15()})}),Object(E.jsx)(L,{if:e.\u7279\u5225\u8cbb(),children:Object(E.jsxs)("dd",{children:["(\u7279\u5225\u8cbb\u8fbc: ",Object(E.jsx)(H,{children:e.\u7279\u5225\u8cbb\u3092\u542b\u3081\u305f\u5dee\u5f15()}),")"]})})]})},M=function(){function t(){Object(l.a)(this,t),this.value=void 0,this.value=new Date}return Object(h.a)(t,[{key:"restOfCurrentMonth",value:function(){var t=new Date(this.value.getFullYear(),this.value.getMonth()+1,0);return Math.ceil((t.getTime()-this.value.getTime())/864e5)}}]),t}();var P=function(t){var e=t.monthlyAggregation;return Object(E.jsxs)("div",{children:[Object(E.jsx)("h2",{children:"\u4eca\u6708"}),Object(E.jsxs)("p",{children:["(\u6b8b\u308a ",(new M).restOfCurrentMonth()," \u65e5)"]}),Object(E.jsx)(D,{children:e.asSummary()}),Object(E.jsx)("h3",{children:"\u5185\u8a33"}),Object(E.jsx)(B,{children:e})]})};var N=function(t){var e=t.state,n=e.isLoading,r=e.data;return Object(E.jsx)(I,{if:n||r.isEmpty(),children:function(){var t=r.currentMonth();return Object(E.jsx)(P,{monthlyAggregation:t})}})},J=n(14),K=Object(s.a)();function R(t){return function(e){return Object(E.jsx)(N,Object(o.a)({},Object(o.a)(Object(o.a)({},e),{},{state:t})))}}var _=function(){var t=new j(K.location.search).dataSource(),e=C(t);return Object(E.jsxs)(c.Fragment,{children:[Object(E.jsx)("header",{children:Object(E.jsx)("h1",{children:"Online KAKEBO"})}),Object(E.jsx)("hr",{}),Object(E.jsx)(J.b,{history:K,children:Object(E.jsx)(J.a,{path:"/",render:R(e)})})]})},U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,i=e.getLCP,u=e.getTTFB;n(t),r(t),c(t),i(t),u(t)}))};a.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(_,{})}),document.getElementById("root")),U()}},[[36,1,2]]]);
//# sourceMappingURL=main.7d8f5463.chunk.js.map